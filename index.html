<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ุฑุงุฏุงุฑ ููุฌุงุช ุฅูููุช ุงููุชูุฏู</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <i class="fa-solid fa-wave-square"></i>
                <span>ุฑุงุฏุงุฑ ููุฌุงุช ุฅูููุช ุงููุชูุฏู</span>
            </div>
            <nav class="nav">
                <a href="#dashboard" class="nav-link active">
                    <i class="fa-solid fa-chart-line"></i>
                    ููุญุฉ ุงูุชุญูู
                </a>
                <a href="#favorites" class="nav-link">
                    <i class="fa-solid fa-heart"></i>
                    ุงูููุถูุฉ
                </a>
                <a href="#saved" class="nav-link">
                    <i class="fa-solid fa-bookmark"></i>
                    ุงูุชุญุงููู ุงููุญููุธุฉ
                </a>
                <a href="#settings" class="nav-link">
                    <i class="fa-solid fa-cog"></i>
                    ุงูุฅุนุฏุงุฏุงุช
                </a>
                <button id="themeToggle" class="theme-toggle">
                    <i class="fa-solid fa-moon"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Quick Analysis Section -->
            <div class="quick-analysis-section">
                <div class="quick-analysis-header">
                    <h2><i class="fa-solid fa-search"></i> ุชุญููู ุณุฑูุน</h2>
                </div>
                <div class="quick-analysis-form">
                    <div class="input-group">
                        <input type="text" id="symbolInput" placeholder="ุฃุฏุฎู ุฑูุฒ ุงูุนููุฉ (ูุซู: BTCUSDT)" class="symbol-input">
                        <button onclick="elliottWaveRadar.analyzeSymbol(document.getElementById('symbolInput').value.trim().toUpperCase())" class="analyze-btn">
                            <i class="fa-solid fa-chart-line"></i>
                            ุชุญููู
                        </button>
                    </div>
                    <div class="shortcuts-info">
                        <small><i class="fa-solid fa-keyboard"></i> ุงุฎุชุตุงุฑ: Ctrl + Enter</small>
                    </div>
                </div>
            </div>

            <!-- Dashboard Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-coins"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalSymbols">0</h3>
                        <p>ุงูุนููุงุช ุงููุญููุฉ</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-chart-line"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="bullishCount">0</h3>
                        <p>ุฅุดุงุฑุงุช ุตุงุนุฏุฉ</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-chart-line-down"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="bearishCount">0</h3>
                        <p>ุฅุดุงุฑุงุช ูุงุจุทุฉ</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-shield-halved"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="avgConfidence">0%</h3>
                        <p>ูุชูุณุท ุงูุซูุฉ</p>
                    </div>
                </div>
            </div>

            <!-- Statistics Container -->
            <div id="statisticsContainer" class="statistics-section">
                <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
            </div>

            <!-- Chart Section -->
            <div class="chart-section">
                <div class="chart-header">
                    <h2><i class="fa-solid fa-chart-pie"></i> ุชูุฒูุน ุงูุฅุดุงุฑุงุช</h2>
                </div>
                <div class="chart-container">
                    <canvas id="signalsChart"></canvas>
                </div>
            </div>

            <!-- Advanced Search Section -->
            <div class="advanced-search-section">
                <div class="search-header">
                    <h2><i class="fa-solid fa-search-plus"></i> ุงูุจุญุซ ุงููุชูุฏู</h2>
                    <button class="toggle-search-btn" onclick="document.querySelector('.search-form').classList.toggle('expanded')">
                        <i class="fa-solid fa-chevron-down"></i>
                    </button>
                </div>
                <div class="search-form">
                    <div class="search-grid">
                        <div class="search-field">
                            <label>ุงูุฑูุฒ</label>
                            <input type="text" id="searchSymbol" placeholder="BTCUSDT">
                        </div>
                        <div class="search-field">
                            <label>ุงูุงุชุฌุงู</label>
                            <select id="searchDirection">
                                <option value="">ุงููู</option>
                                <option value="bullish">ุตุงุนุฏ</option>
                                <option value="bearish">ูุงุจุท</option>
                            </select>
                        </div>
                        <div class="search-field">
                            <label>ุงูุญุฏ ุงูุฃุฏูู ููุซูุฉ</label>
                            <input type="number" id="searchConfidence" min="0" max="100" placeholder="75">
                        </div>
                        <div class="search-field">
                            <label>ูู ุชุงุฑูุฎ</label>
                            <input type="date" id="searchDateFrom">
                        </div>
                        <div class="search-field">
                            <label>ุฅูู ุชุงุฑูุฎ</label>
                            <input type="date" id="searchDateTo">
                        </div>
                        <div class="search-actions">
                            <button onclick="elliottWaveRadar.performAdvancedSearch({
                                symbol: document.getElementById('searchSymbol').value,
                                direction: document.getElementById('searchDirection').value,
                                minConfidence: document.getElementById('searchConfidence').value,
                                dateFrom: document.getElementById('searchDateFrom').value,
                                dateTo: document.getElementById('searchDateTo').value
                            })" class="search-btn">
                                <i class="fa-solid fa-search"></i>
                                ุจุญุซ
                            </button>
                            <button onclick="document.querySelector('.search-form').reset()" class="reset-btn">
                                <i class="fa-solid fa-refresh"></i>
                                ุฅุนุงุฏุฉ ุชุนููู
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Favorites Section -->
            <div class="favorites-section">
                <div class="favorites-header">
                    <h2><i class="fa-solid fa-heart"></i> ุงูุฑููุฒ ุงูููุถูุฉ</h2>
                    <div class="favorites-actions">
                        <button onclick="elliottWaveRadar.refreshFavoriteAnalyses(JSON.parse(localStorage.getItem('favoriteSymbols') || '[]'))" class="refresh-favorites-btn">
                            <i class="fa-solid fa-refresh"></i>
                            ุชุญุฏูุซ
                        </button>
                    </div>
                </div>
                <div id="favoritesList" class="favorites-list">
                    <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                </div>
            </div>

            <!-- Saved Analyses Section -->
            <div class="saved-analyses-section">
                <div class="saved-analyses-header">
                    <h2><i class="fa-solid fa-bookmark"></i> ุงูุชุญุงููู ุงููุญููุธุฉ</h2>
                    <div class="saved-analyses-actions">
                        <button onclick="elliottWaveRadar.exportAnalyses()" class="export-btn">
                            <i class="fa-solid fa-download"></i>
                            ุชุตุฏูุฑ
                        </button>
                        <label for="importFile" class="import-btn">
                            <i class="fa-solid fa-upload"></i>
                            ุงุณุชูุฑุงุฏ
                        </label>
                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="elliottWaveRadar.importAnalyses(event)">
                    </div>
                </div>
                <div id="savedAnalysesList" class="saved-analyses-list">
                    <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                </div>
            </div>

            <!-- Loading -->
            <div class="loading-section" id="loading">
                <div class="loading-spinner"></div>
                <p>๐ ุฌุงุฑู ูุญุต ุฃูู 100 ุนููุฉ...</p>
            </div>

            <!-- Results -->
            <div class="results-section">
                <div class="results-header">
                    <h2><i class="fa-solid fa-list"></i> ูุชุงุฆุฌ ุงูุชุญููู</h2>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">ุงููู</button>
                        <button class="filter-btn" data-filter="bullish">ุตุงุนุฏ</button>
                        <button class="filter-btn" data-filter="bearish">ูุงุจุท</button>
                        <button class="filter-btn" data-filter="high-confidence">ุซูุฉ ุนุงููุฉ</button>
                    </div>
                </div>
                <div id="results" class="results-grid"></div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>ุฑุงุฏุงุฑ ููุฌุงุช ุฅูููุช</h3>
                <p>ุฃุฏุงุฉ ุชุญููู ูุชูุฏูุฉ ูููุฌุงุช ุฅูููุช ูู ุฃุณูุงู ุงูุนููุงุช ุงูุฑูููุฉ</p>
                <div class="keyboard-shortcuts">
                    <h4>ุงูุงุฎุชุตุงุฑุงุช</h4>
                    <ul>
                        <li><kbd>Ctrl + Enter</kbd> - ุชุญููู ุณุฑูุน</li>
                        <li><kbd>Ctrl + S</kbd> - ุญูุธ ุงูุชุญููู</li>
                        <li><kbd>Ctrl + D</kbd> - ุชุจุฏูู ุงูููุถูุน</li>
                        <li><kbd>Escape</kbd> - ุฅุบูุงู ุงูููุงูุฐ</li>
                    </ul>
                </div>
            </div>
            <div class="footer-section">
                <h4>ุฑูุงุจุท ูููุฏุฉ</h4>
                <ul>
                    <li><a href="#">ุฏููู ุงูุงุณุชุฎุฏุงู</a></li>
                    <li><a href="#">ูุธุฑูุฉ ููุฌุงุช ุฅูููุช</a></li>
                    <li><a href="#">ุงูุฏุนู ุงูููู</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>ุชูุงุตู ูุนูุง</h4>
                <div class="social-links">
                    <a href="#"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#"><i class="fa-brands fa-telegram"></i></a>
                    <a href="#"><i class="fa-brands fa-discord"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 ุฑุงุฏุงุฑ ููุฌุงุช ุฅูููุช. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
        </div>
    </footer>

    <!-- Modal for Recommendations -->
    <div id="recommendationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fa-solid fa-coins"></i>
                    ุชูุตูุฉ ุงูุชุฏุงูู
                </div>
                <button class="modal-close-btn" onclick="document.getElementById('recommendationModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be inserted here -->
            </div>
            <div class="modal-footer">
                <button id="copyRecommendation" class="copy-btn">
                    <i class="fa-solid fa-copy"></i>
                    ูุณุฎ ุงูุชูุตูุฉ ุงููุงููุฉ
                </button>
                <button class="close-btn" onclick="document.getElementById('recommendationModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Search Results Modal -->
    <div id="searchResultsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fa-solid fa-search"></i>
                    ูุชุงุฆุฌ ุงูุจุญุซ
                </div>
                <button class="modal-close-btn" onclick="document.getElementById('searchResultsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="search-results">
                    <!-- Search results will be inserted here -->
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="elliottWaveRadar.exportSearchResults(elliottWaveRadar.lastSearchResults)" class="export-results-btn">
                    <i class="fa-solid fa-download"></i>
                    ุชุตุฏูุฑ ุงููุชุงุฆุฌ
                </button>
                <button class="close-btn" onclick="document.getElementById('searchResultsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>
    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fa-solid fa-cog"></i>
                    ุงูุฅุนุฏุงุฏุงุช
                </div>
                <button class="modal-close-btn" onclick="document.getElementById('settingsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3><i class="fa-solid fa-palette"></i> ุงููุธูุฑ</h3>
                    <div class="setting-item">
                        <label>ุงูููุถูุน</label>
                        <select id="themeSelect">
                            <option value="light">ูุงุชุญ</option>
                            <option value="dark">ุฏุงูู</option>
                            <option value="auto">ุชููุงุฆู</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3><i class="fa-solid fa-chart-line"></i> ุงูุชุญููู</h3>
                    <div class="setting-item">
                        <label>ุงูุญุฏ ุงูุฃุฏูู ููุณุชูู ุงูุซูุฉ</label>
                        <input type="range" id="confidenceThreshold" min="50" max="95" value="75">
                        <span id="confidenceValue">75%</span>
                    </div>
                    <div class="setting-item">
                        <label>ุนุฏุฏ ุงูุนููุงุช ููุชุญููู</label>
                        <select id="analysisLimit">
                            <option value="50">50 ุนููุฉ</option>
                            <option value="100" selected>100 ุนููุฉ</option>
                            <option value="200">200 ุนููุฉ</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3><i class="fa-solid fa-bell"></i> ุงูุฅุดุนุงุฑุงุช</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enableNotifications">
                            ุชูุนูู ุงูุฅุดุนุงุฑุงุช
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="soundNotifications">
                            ุงูุฅุดุนุงุฑุงุช ุงูุตูุชูุฉ
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="elliottWaveRadar.saveSettings()" class="save-btn">
                    <i class="fa-solid fa-save"></i>
                    ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                </button>
                <button onclick="elliottWaveRadar.resetSettings()" class="reset-settings-btn">
                    <i class="fa-solid fa-refresh"></i>
                    ุฅุนุงุฏุฉ ุชุนููู
                </button>
                <button class="close-btn" onclick="document.getElementById('settingsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Analysis Details Modal -->
    <div id="analysisDetailsModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fa-solid fa-chart-line"></i>
                    ุชูุงุตูู ุงูุชุญููู
                </div>
                <button class="modal-close-btn" onclick="document.getElementById('analysisDetailsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="analysisDetailsBody">
                <!-- Analysis details will be inserted here -->
            </div>
            <div class="modal-footer">
                <button id="saveAnalysisBtn" class="save-btn">
                    <i class="fa-solid fa-bookmark"></i>
                    ุญูุธ ุงูุชุญููู
                </button>
                <button id="shareAnalysisBtn" class="share-btn">
                    <i class="fa-solid fa-share"></i>
                    ูุดุงุฑูุฉ
                </button>
                <button class="close-btn" onclick="document.getElementById('analysisDetailsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container">
        <!-- Notifications will be inserted here -->
    </div>

    <!-- Keyboard Shortcuts Help -->
    <div id="shortcutsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fa-solid fa-keyboard"></i>
                    ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญ
                </div>
                <button class="modal-close-btn" onclick="document.getElementById('shortcutsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="shortcuts-grid">
                    <div class="shortcut-item">
                        <kbd>Ctrl + Enter</kbd>
                        <span>ุชุญููู ุณุฑูุน</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl + S</kbd>
                        <span>ุญูุธ ุงูุชุญููู ุงูุญุงูู</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl + D</kbd>
                        <span>ุชุจุฏูู ุงูููุถูุน (ูุงุชุญ/ุฏุงูู)</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl + F</kbd>
                        <span>ูุชุญ ุงูุจุญุซ ุงููุชูุฏู</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl + ,</kbd>
                        <span>ูุชุญ ุงูุฅุนุฏุงุฏุงุช</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Escape</kbd>
                        <span>ุฅุบูุงู ุงูููุงูุฐ ุงูููุจุซูุฉ</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>F1</kbd>
                        <span>ุนุฑุถ ูุฐู ุงููุณุงุนุฏุฉ</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl + R</kbd>
                        <span>ุชุญุฏูุซ ุงูุจูุงูุงุช</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="close-btn" onclick="document.getElementById('shortcutsModal').style.display='none'">
                    <i class="fa-solid fa-times"></i>
                    ุฅุบูุงู
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>

    <!-- Initialize App -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Elliott Wave Radar
            if (typeof elliottWaveRadar !== 'undefined') {
                elliottWaveRadar.init();
            }
            
            // Load saved settings
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            
            // Update theme toggle icon
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('i');
            if (savedTheme === 'dark') {
                themeIcon.className = 'fa-solid fa-sun';
            } else {
                themeIcon.className = 'fa-solid fa-moon';
            }
            
            // Load saved analyses count
            const savedAnalyses = JSON.parse(localStorage.getItem('savedAnalyses') || '[]');
            console.log(`ุชู ุชุญููู ${savedAnalyses.length} ุชุญููู ูุญููุธ`);
            
            // Load favorite symbols
            const favoriteSymbols = JSON.parse(localStorage.getItem('favoriteSymbols') || '[]');
            console.log(`ุชู ุชุญููู ${favoriteSymbols.length} ุฑูุฒ ููุถู`);
            
            // Show welcome message for first-time users
            if (!localStorage.getItem('hasVisited')) {
                setTimeout(() => {
                    elliottWaveRadar.showNotification('ูุฑุญุจุงู ุจู ูู ุฑุงุฏุงุฑ ููุฌุงุช ุฅูููุช ุงููุชูุฏู! ๐', 'success');
                    localStorage.setItem('hasVisited', 'true');
                }, 1000);
            }
        });
        
        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('ุฎุทุฃ ูู ุงูุชุทุจูู:', e.error);
            if (typeof elliottWaveRadar !== 'undefined') {
                elliottWaveRadar.showNotification('ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน. ูุฑุฌู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ.', 'error');
            }
        });
        
        // Handle offline/online status
        window.addEventListener('online', function() {
            if (typeof elliottWaveRadar !== 'undefined') {
                elliottWaveRadar.showNotification('ุชู ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช ๐', 'success');
            }
        });
        
        window.addEventListener('offline', function() {
            if (typeof elliottWaveRadar !== 'undefined') {
                elliottWaveRadar.showNotification('ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช. ุจุนุถ ุงูููุฒุงุช ูุฏ ูุง ุชุนูู.', 'warning');
            }
        });
    </script>
     <script src="elliott-wave.js"></script>
    <script src="app.js"></script>
</body>
</html>
